<link rel="stylesheet" href="/node_modules/reveal.js/dist/reveal.css">
<link rel="stylesheet" href="/node_modules/reveal.js/dist/theme/black.css">
<link rel="stylesheet" href="/node_modules/@pqina/flip/dist/flip.min.css">
<style>
    .tick {
        font-size: 2em;
    }
</style>
<div class="reveal">
    <div class="slides">
        <section>
            <h2>Pitchbox</h2>
        </section>
        <% startups.forEach(function(startup) { %>
        <section>
            <h2><%= startup.attributes.name %></h2>
            <p><%= startup.attributes.pitch %></p>
            <div class="tick"
                data-value="60">
                <div data-repeat="true">
                    <span data-view="flip"></span>
                </div>
            </div>
        </section>
        <% }) %>
        <section>
            <h2>C'est fini</h2>
        </section>
    </div>
</div>

<script src="/node_modules/reveal.js/dist/reveal.js"></script>
<script src="/node_modules/@pqina/flip/dist/flip.js"></script>
<script>
  Reveal.initialize({     
      hash: true
  });
  var currentTick;
  Reveal.on('slidechanged', event => {
    currentTick = event.currentSlide.getElementsByClassName("tick")[0];
    if(currentTick) {
        currentTick.dataset.value = 60;
    }
  });
  function counting() {
    setInterval(function () {
        if(currentTick) {
            currentTick.dataset.value--;
        }
    }, 1000);
  }
  window.onload = function () {
    counting();
  }
</script>